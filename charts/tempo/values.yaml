# Tempo configuration for distributed tracing
# Wraps the official Grafana Tempo Helm chart in single-binary mode

tempo:
  # Tempo configuration
  tempo:
    # OTLP receivers
    receivers:
      otlp:
        protocols:
          grpc:
            endpoint: "0.0.0.0:4317"
          http:
            endpoint: "0.0.0.0:4318"

    # Local filesystem storage
    storage:
      trace:
        backend: local
        local:
          path: /var/tempo/traces
        wal:
          path: /var/tempo/wal

    # Reduce memory ballast from default 1024MB
    memBallastSizeMbs: 128

    # Resources (must be under tempo.tempo to apply to subchart)
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi

  # Persistence (disabled for POC)
  persistence:
    enabled: false
