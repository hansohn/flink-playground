# MinIO configuration for Flink state backend
# Provides S3-compatible object storage for POC testing
# For production, migrate to AWS S3, Google Cloud Storage, or Azure Blob Storage

minio:
  # Deployment mode (standalone for POC, distributed for production)
  mode: standalone
  replicas: 1

  # Root credentials
  # These values are used to create the secret in templates/secret.yaml
  # The secret is then referenced via existingSecret below
  rootUser: admin
  rootPassword: password123

  # Use secret created by this chart (see templates/secret.yaml)
  # The upstream MinIO chart will read credentials from this secret
  existingSecret: minio-credentials

  # Persistence
  persistence:
    enabled: true
    storageClass: standard  # Kind's local-path provisioner
    size: 10Gi

  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Service configuration
  service:
    type: ClusterIP  # Internal only
    port: 9000

  # Console (MinIO web UI)
  consoleService:
    type: ClusterIP
    port: 9001

  # Pre-create buckets for Flink
  buckets:
    - name: flink-state
      policy: none
      purge: false

  # Enable Prometheus metrics (optional)
  metrics:
    serviceMonitor:
      enabled: false  # Enable if Prometheus Operator is available
